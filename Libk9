-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- â˜¯ K9 UI LIBRARY - GLASSMORPHISM DARK EDITION
-- VersÃ£o Completa e Corrigida
-- CompatÃ­vel: Mobile + PC
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local K9Library = {}
local Utility = {}
local Objects = {}
local Connections = {}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“¦ SERVIÃ‡OS GLOBAIS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- âœ… CORREÃ‡ÃƒO: Mouse com verificaÃ§Ã£o para mobile
local Mouse = pcall(function() return LocalPlayer:GetMouse() end) and LocalPlayer:GetMouse() or nil

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ¨ CONFIGURAÃ‡Ã•ES GLOBAIS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Config = {
    -- âœ… CORREÃ‡ÃƒO: Font com fallback
    Font = pcall(function() return Font.new("rbxassetid://12187375716") end) and Font.new("rbxassetid://12187375716") or Font.fromEnum(Enum.Font.Gotham),
    Theme = {
        Background = Color3.fromRGB(20, 20, 25),
        Glass = Color3.fromRGB(30, 30, 40),
        Accent = Color3.fromRGB(100, 150, 255),
        Text = Color3.fromRGB(255, 255, 255),
        TextSecondary = Color3.fromRGB(180, 180, 190),
        Border = Color3.fromRGB(60, 60, 80),
        Success = Color3.fromRGB(100, 200, 100),
        Error = Color3.fromRGB(200, 100, 100)
    },
    ParticleConfig = {
        ParticleCount = 30,
        Speed = 0.2,
        ConnectionDistance = 100,
        ParticleColor = Color3.fromRGB(100, 150, 255),
        LineColor = Color3.fromRGB(100, 150, 255),
        BackgroundTransparency = 0.85,
        MaxConnectionsPerParticle = 3    },
    Sizes = {
        MainWidth = 500,
        MainHeight = 350,
        TabWidth = 140,
        ElementHeight = 36,
        CornerRadius = 10
    }
}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ”§ FUNÃ‡Ã•ES UTILITÃRIAS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Utility:TweenObject(obj, properties, duration, style, direction)
    pcall(function()
        local tween = TweenService:Create(
            obj, 
            TweenInfo.new(duration or 0.2, style or Enum.EasingStyle.Quad, direction or Enum.EasingDirection.Out), 
            properties
        )
        tween:Play()
    end)
end

function Utility:CreateInstance(class, properties, parent)
    local success, obj = pcall(function()
        local instance = Instance.new(class)
        for prop, value in pairs(properties or {}) do
            pcall(function() instance[prop] = value end)
        end
        if parent then instance.Parent = parent end
        return instance
    end)
    return success and obj or nil
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ–±ï¸ SISTEMA DE DRAGGING
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function K9Library:DraggingEnabled(frame, parent)
    parent = parent or frame
    local dragging = false
    local dragInput = nil
    local mousePos = nil
    local framePos = nil
    
    local function update(input)
        local delta = input.Position - mousePos        pcall(function()
            parent.Position = UDim2.new(
                framePos.X.Scale, framePos.X.Offset + delta.X,
                framePos.Y.Scale, framePos.Y.Offset + delta.Y
            )
        end)
    end
    
    frame.InputBegan:Connect(function(input)
        pcall(function()
            if input.UserInputType == Enum.UserInputType.MouseButton1 or 
               input.UserInputType == Enum.UserInputType.Touch then
                dragging = true
                mousePos = input.Position
                framePos = parent.Position
                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then
                        dragging = false
                    end
                end)
            end
        end)
    end)
    
    frame.InputChanged:Connect(function(input)
        pcall(function()
            if input.UserInputType == Enum.UserInputType.MouseMovement or 
               input.UserInputType == Enum.UserInputType.Touch then
                dragInput = input
            end
        end)
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        pcall(function()
            if input == dragInput and dragging then
                update(input)
            end
        end)
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- âœ¨ SISTEMA DE PARTÃCULAS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function K9Library:CreateParticleNetwork(parent, customConfig)
    local particleConfig = {}
    for key, value in pairs(Config.ParticleConfig) do
        particleConfig[key] = value    end
    if customConfig then
        for key, value in pairs(customConfig) do
            particleConfig[key] = value
        end
    end
    
    local container = Utility:CreateInstance("Frame", {
        Name = "ParticleContainer",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        ClipsDescendants = true,
        ZIndex = 0
    }, parent)
    
    local particles = {}
    local connections = {}
    local running = true
    
    for i = 1, particleConfig.ParticleCount do
        local particle = Utility:CreateInstance("Frame", {
            Name = "Particle_" .. i,
            BackgroundColor3 = particleConfig.ParticleColor,
            BackgroundTransparency = 0.3,
            BorderSizePixel = 0,
            Size = UDim2.new(0, 3, 0, 3),
            Position = UDim2.new(math.random() * 0.9 + 0.05, 0, math.random() * 0.9 + 0.05, 0),
            ZIndex = 1
        }, container)
        
        Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, particle)
        
        table.insert(particles, {
            Instance = particle,
            Velocity = Vector2.new(
                (math.random() - 0.5) * particleConfig.Speed,
                (math.random() - 0.5) * particleConfig.Speed
            )
        })
    end
    
    local function createLine(p1, p2, transparency)
        local distance = (p1 - p2).Magnitude
        if distance == 0 then return nil end
        local midpoint = (p1 + p2) / 2
        local angle = math.atan2(p2.Y - p1.Y, p2.X - p1.X)
        
        return Utility:CreateInstance("Frame", {            BackgroundColor3 = particleConfig.LineColor,
            BackgroundTransparency = transparency,
            BorderSizePixel = 0,
            Size = UDim2.new(0, distance, 0, 1),
            Position = UDim2.new(0, midpoint.X - distance / 2, 0, midpoint.Y - 0.5),
            Rotation = math.deg(angle),
            ZIndex = 0
        }, container)
    end
    
    local renderConnection
    renderConnection = RunService.RenderStepped:Connect(function()
        if not running or not container.Parent then
            if renderConnection then renderConnection:Disconnect() end
            return
        end
        
        for _, particleData in ipairs(particles) do
            local particle = particleData.Instance
            local pos = particle.Position
            local newX = pos.X.Offset + particleData.Velocity.X
            local newY = pos.Y.Offset + particleData.Velocity.Y
            
            if newX <= 0 or newX >= container.AbsoluteSize.X - 3 then
                particleData.Velocity = Vector2.new(-particleData.Velocity.X, particleData.Velocity.Y)
            end
            if newY <= 0 or newY >= container.AbsoluteSize.Y - 3 then
                particleData.Velocity = Vector2.new(particleData.Velocity.X, -particleData.Velocity.Y)
            end
            
            pcall(function()
                particle.Position = UDim2.new(
                    pos.X.Scale, math.clamp(newX, 0, container.AbsoluteSize.X - 3),
                    pos.Y.Scale, math.clamp(newY, 0, container.AbsoluteSize.Y - 3)
                )
            end)
        end
        
        for _, line in ipairs(connections) do
            pcall(function() line:Destroy() end)
        end
        connections = {}
        
        local maxConnections = particleConfig.MaxConnectionsPerParticle
        for i = 1, #particles do
            local connectionCount = 0
            for j = i + 1, #particles do
                if connectionCount >= maxConnections then break end
                local pos1 = particles[i].Instance.AbsolutePosition + particles[i].Instance.AbsoluteSize / 2
                local pos2 = particles[j].Instance.AbsolutePosition + particles[j].Instance.AbsoluteSize / 2                local distance = (pos1 - pos2).Magnitude
                
                if distance <= particleConfig.ConnectionDistance then
                    local transparency = math.clamp(1 - (distance / particleConfig.ConnectionDistance), 0.2, 0.8)
                    local line = createLine(pos1, pos2, transparency)
                    if line then
                        table.insert(connections, line)
                        connectionCount = connectionCount + 1
                    end
                end
            end
        end
    end)
    
    return {
        Container = container,
        Destroy = function()
            running = false
            if renderConnection then renderConnection:Disconnect() end
            for _, line in ipairs(connections) do pcall(function() line:Destroy() end) end
            pcall(function() container:Destroy() end)
        end
    }
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“› VARIÃVEIS GLOBAIS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local LibName = "K9_" .. tostring(math.random(1000, 9999))
local MainGUI = nil
local ParticleSystem = nil
local CurrentTheme = Config.Theme

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ”“ FUNÃ‡Ã•ES GLOBAIS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function K9Library:ToggleUI()
    pcall(function()
        if MainGUI and MainGUI.Parent then
            MainGUI.Enabled = not MainGUI.Enabled
        end
    end)
end

function K9Library:Destroy()
    pcall(function()
        if ParticleSystem then ParticleSystem:Destroy() end
        if MainGUI then MainGUI:Destroy() end    end)
    for _, conn in ipairs(Connections) do pcall(function() conn:Disconnect() end) end
    Connections = {}
end

function K9Library:ChangeTheme(newTheme)
    for key, value in pairs(newTheme) do
        CurrentTheme[key] = value
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ”” SISTEMA DE NOTIFICAÃ‡Ã•ES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local NotificationContainer = nil

function K9Library:Notify(title, message, duration, notifyType)
    duration = duration or 3
    notifyType = notifyType or "Info"
    
    if not NotificationContainer then
        NotificationContainer = Utility:CreateInstance("ScreenGui", {
            Name = "K9_Notifications",
            ResetOnSpawn = false,
            ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
            DisplayOrder = 1000,
            IgnoreGuiInset = true
        }, CoreGui)
        
        Utility:CreateInstance("Frame", {
            Name = "Container",
            BackgroundTransparency = 1,
            Position = UDim2.new(1, -20, 1, -20),
            AnchorPoint = Vector2.new(1, 1),
            Size = UDim2.new(0, 300, 0, 0)
        }, NotificationContainer)
    end
    
    local colors = {
        Info = {Accent = Color3.fromRGB(100, 150, 255)},
        Success = {Accent = Color3.fromRGB(100, 200, 100)},
        Warning = {Accent = Color3.fromRGB(200, 200, 100)},
        Error = {Accent = Color3.fromRGB(200, 100, 100)}
    }
    
    local style = colors[notifyType] or colors.Info
    local container = NotificationContainer:FindFirstChild("Container")
    
    local NotifyFrame = Utility:CreateInstance("Frame", {        Name = "Notification",
        BackgroundColor3 = CurrentTheme.Glass,
        BackgroundTransparency = 0.1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 60),
        ClipsDescendants = true
    }, container)
    
    Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8)}, NotifyFrame)
    Utility:CreateInstance("UIStroke", {
        Thickness = 1, Color = style.Accent, Transparency = 0.5,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    }, NotifyFrame)
    
    Utility:CreateInstance("TextLabel", {
        Name = "NotifyTitle",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 5),
        Size = UDim2.new(1, -20, 0, 20),
        FontFace = Config.Font,
        Text = title,
        TextColor3 = CurrentTheme.Text,
        TextSize = 13,
        TextXAlignment = Enum.TextXAlignment.Left
    }, NotifyFrame)
    
    Utility:CreateInstance("TextLabel", {
        Name = "NotifyMessage",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 10, 0, 25),
        Size = UDim2.new(1, -20, 0, 30),
        FontFace = Config.Font,
        Text = message,
        TextColor3 = CurrentTheme.TextSecondary,
        TextSize = 11,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true
    }, NotifyFrame)
    
    local ProgressFrame = Utility:CreateInstance("Frame", {
        BackgroundColor3 = style.Accent,
        Position = UDim2.new(0, 0, 1, 0),
        Size = UDim2.new(1, 0, 0, 2),
        AnchorPoint = Vector2.new(0, 1)
    }, NotifyFrame)
    
    Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8)}, ProgressFrame)
    
    NotifyFrame.Position = UDim2.new(1, 20, 0, 0)
    NotifyFrame.BackgroundTransparency = 1    
    Utility:TweenObject(NotifyFrame, {
        Position = UDim2.new(1, -20, 0, 0),
        BackgroundTransparency = 0.1
    }, 0.3)
    
    Utility:TweenObject(ProgressFrame, {Size = UDim2.new(0, 0, 0, 2)}, duration, Enum.EasingStyle.Linear)
    
    task.delay(duration, function()
        Utility:TweenObject(NotifyFrame, {
            Position = UDim2.new(1, 20, 0, 0),
            BackgroundTransparency = 1
        }, 0.3)
        task.wait(0.3)
        pcall(function() NotifyFrame:Destroy() end)
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ—ï¸ FUNÃ‡ÃƒO PRINCIPAL: CreateLib
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function K9Library:CreateLib(libName, customTheme)
    LibName = libName or "K9 Library"
    
    if customTheme then
        for key, value in pairs(customTheme) do
            CurrentTheme[key] = value
        end
    end
    
    pcall(function()
        for _, gui in ipairs(CoreGui:GetChildren()) do
            if gui:IsA("ScreenGui") and gui.Name:find("K9_") then
                gui:Destroy()
            end
        end
    end)
    
    -- ScreenGui
    MainGUI = Utility:CreateInstance("ScreenGui", {
        Name = LibName,
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
        DisplayOrder = 100,
        IgnoreGuiInset = true
    }, CoreGui)
    
    -- MainFrame
    local MainFrame = Utility:CreateInstance("Frame", {        Name = "MainFrame",
        BackgroundColor3 = CurrentTheme.Background,
        BackgroundTransparency = 0.15,
        BorderSizePixel = 0,
        Position = UDim2.new(0.5, 0, 0.5, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        Size = UDim2.new(0, Config.Sizes.MainWidth, 0, Config.Sizes.MainHeight),
        ClipsDescendants = true
    }, MainGUI)
    
    Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, Config.Sizes.CornerRadius)}, MainFrame)
    
    -- Header
    local Header = Utility:CreateInstance("Frame", {
        Name = "Header",
        BackgroundColor3 = CurrentTheme.Glass,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 40)
    }, MainFrame)
    
    Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, Config.Sizes.CornerRadius)}, Header)
    
    Utility:CreateInstance("TextLabel", {
        Name = "TitleLabel",
        BackgroundTransparency = 1,
        Position = UDim2.new(0, 12, 0, 0),
        Size = UDim2.new(0.6, 0, 1, 0),
        FontFace = Config.Font,
        Text = "â˜¯ " .. LibName,
        TextColor3 = CurrentTheme.Text,
        TextSize = 16,
        TextXAlignment = Enum.TextXAlignment.Left
    }, Header)
    
    -- Close Button
    local CloseButton = Utility:CreateInstance("ImageButton", {
        Name = "CloseButton",
        BackgroundTransparency = 1,
        Position = UDim2.new(1, -10, 0.5, 0),
        AnchorPoint = Vector2.new(1, 0.5),
        Size = UDim2.new(0, 24, 0, 24),
        Image = "rbxassetid://3926305904",
        ImageRectOffset = Vector2.new(284, 4),
        ImageRectSize = Vector2.new(24, 24),
        ImageColor3 = CurrentTheme.Text
    }, Header)
    
    -- Navigation
    local Navigation = Utility:CreateInstance("Frame", {        Name = "Navigation",
        BackgroundColor3 = CurrentTheme.Glass,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        Position = UDim2.new(0, 0, 0, 40),
        Size = UDim2.new(0, Config.Sizes.TabWidth, 1, -40)
    }, MainFrame)
    
    Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 0, 0, Config.Sizes.CornerRadius)}, Navigation)
    
    Utility:CreateInstance("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 4)
    }, Navigation)
    
    Utility:CreateInstance("UIPadding", {
        PaddingTop = UDim.new(0, 8),
        PaddingBottom = UDim.new(0, 8),
        PaddingLeft = UDim.new(0, 6),
        PaddingRight = UDim.new(0, 6)
    }, Navigation)
    
    -- Content Container
    local ContentContainer = Utility:CreateInstance("ScrollingFrame", {
        Name = "ContentContainer",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Position = UDim2.new(0, Config.Sizes.TabWidth, 0, 40),
        Size = UDim2.new(1, -Config.Sizes.TabWidth, 1, -40),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = CurrentTheme.Accent
    }, MainFrame)
    
    Utility:CreateInstance("UIPadding", {
        PaddingTop = UDim.new(0, 10),
        PaddingBottom = UDim.new(0, 10),
        PaddingLeft = UDim.new(0, 10),
        PaddingRight = UDim.new(0, 10)
    }, ContentContainer)
    
    local ContentListLayout = Utility:CreateInstance("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 8)
    }, ContentContainer)
    
    local TabsFolder = Utility:CreateInstance("Folder", {Name = "TabsFolder"}, ContentContainer)
    
    -- Particles    ParticleSystem = K9Library:CreateParticleNetwork(MainFrame, Config.ParticleConfig)
    
    -- Dragging
    K9Library:DraggingEnabled(Header, MainFrame)
    
    -- Close Event
    CloseButton.MouseButton1Click:Connect(function()
        Utility:TweenObject(CloseButton, {ImageTransparency = 1}, 0.1)
        Utility:TweenObject(MainFrame, {Size = UDim2.new(0, 0, 0, 0)}, 0.3)
        task.wait(0.3)
        if ParticleSystem then ParticleSystem:Destroy() end
        MainGUI:Destroy()
    end)
    
    -- Tabs System
    local Tabs = {}
    local firstTab = true
    local tabButtons = {}
    
    function Tabs:NewTab(tabName, tabIcon)
        tabName = tabName or "Tab"
        
        local TabButton = Utility:CreateInstance("TextButton", {
            Name = tabName .. "_TabButton",
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 36),
            FontFace = Config.Font,
            Text = "  " .. tabName,
            TextColor3 = CurrentTheme.TextSecondary,
            TextSize = 13,
            TextXAlignment = Enum.TextXAlignment.Left,
            AutoButtonColor = false
        }, Navigation)
        
        Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6)}, TabButton)
        
        local Selector = Utility:CreateInstance("Frame", {
            Name = "Selector",
            BackgroundColor3 = CurrentTheme.Accent,
            Position = UDim2.new(0, 0, 0.5, 0),
            AnchorPoint = Vector2.new(0, 0.5),
            Size = UDim2.new(0, 3, 0, 20),
            Visible = false
        }, TabButton)
        
        Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 2)}, Selector)
        
        local TabContent = Utility:CreateInstance("Frame", {
            Name = tabName .. "_Content",
            BackgroundTransparency = 1,            Size = UDim2.new(1, 0, 0, 0),
            Visible = false
        }, TabsFolder)
        
        local TabContentLayout = Utility:CreateInstance("UIListLayout", {
            SortOrder = Enum.SortOrder.LayoutOrder,
            Padding = UDim.new(0, 6)
        }, TabContent)
        
        if firstTab then
            firstTab = false
            TabContent.Visible = true
            TabButton.BackgroundTransparency = 0.8
            TabButton.TextColor3 = CurrentTheme.Text
            Selector.Visible = true
        end
        
        TabButton.MouseButton1Click:Connect(function()
            for _, content in ipairs(TabsFolder:GetChildren()) do
                if content:IsA("Frame") then
                    content.Visible = false
                end
            end
            for _, btn in ipairs(tabButtons) do
                Utility:TweenObject(btn, {BackgroundTransparency = 1}, 0.2)
                Utility:TweenObject(btn, {TextColor3 = CurrentTheme.TextSecondary}, 0.2)
                local sel = btn:FindFirstChild("Selector")
                if sel then sel.Visible = false end
            end
            TabContent.Visible = true
            Utility:TweenObject(TabButton, {BackgroundTransparency = 0.8}, 0.2)
            Utility:TweenObject(TabButton, {TextColor3 = CurrentTheme.Text}, 0.2)
            Selector.Visible = true
            task.wait(0.1)
            ContentContainer.CanvasSize = UDim2.new(0, 0, 0, TabContentLayout.AbsoluteContentSize.Y + 20)
        end)
        
        table.insert(tabButtons, TabButton)
        
        -- Sections
        local Sections = {}
        
        function Sections:NewSection(sectionName)
            sectionName = sectionName or "Section"
            
            local SectionFrame = Utility:CreateInstance("Frame", {
                Name = sectionName .. "_Section",
                BackgroundColor3 = CurrentTheme.Glass,
                BackgroundTransparency = 0.7,
                BorderSizePixel = 0,                Size = UDim2.new(1, 0, 0, 0),
                ClipsDescendants = true
            }, TabContent)
            
            Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 8)}, SectionFrame)
            Utility:CreateInstance("UIStroke", {
                Thickness = 1, Color = CurrentTheme.Border, Transparency = 0.5,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }, SectionFrame)
            
            Utility:CreateInstance("TextLabel", {
                Name = "SectionTitle",
                BackgroundTransparency = 1,
                Position = UDim2.new(0, 12, 0, 0),
                Size = UDim2.new(1, -24, 0, 30),
                FontFace = Config.Font,
                Text = "âš¡ " .. sectionName,
                TextColor3 = CurrentTheme.Accent,
                TextSize = 13,
                TextXAlignment = Enum.TextXAlignment.Left
            }, SectionFrame)
            
            local SectionContent = Utility:CreateInstance("Frame", {
                Name = "SectionContent",
                BackgroundTransparency = 1,
                Position = UDim2.new(0, 0, 0, 30),
                Size = UDim2.new(1, 0, 1, -30)
            }, SectionFrame)
            
            local SectionLayout = Utility:CreateInstance("UIListLayout", {
                SortOrder = Enum.SortOrder.LayoutOrder,
                Padding = UDim.new(0, 4)
            }, SectionContent)
            
            Utility:CreateInstance("UIPadding", {
                PaddingTop = UDim.new(0, 8),
                PaddingBottom = UDim.new(0, 8),
                PaddingLeft = UDim.new(0, 8),
                PaddingRight = UDim.new(0, 8)
            }, SectionContent)
            
            local function UpdateSectionSize()
                local contentSize = SectionLayout.AbsoluteContentSize.Y + 16
                Utility:TweenObject(SectionFrame, {Size = UDim2.new(1, 0, 0, contentSize + 30)}, 0.2)
                ContentContainer.CanvasSize = UDim2.new(0, 0, 0, TabContentLayout.AbsoluteContentSize.Y + 20)
            end
            
            task.wait(0.1)
            UpdateSectionSize()
            SectionLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateSectionSize)            
            -- âœ… CORREÃ‡ÃƒO: Elements criado dentro de NewSection
            local Elements = {}
            
            -- Button
            function Elements:NewButton(buttonName, description, callback)
                callback = callback or function() end
                
                local ButtonFrame = Utility:CreateInstance("TextButton", {
                    Name = buttonName .. "_Button",
                    BackgroundColor3 = CurrentTheme.Glass,
                    BackgroundTransparency = 0.6,
                    BorderSizePixel = 0,
                    Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight),
                    AutoButtonColor = false,
                    FontFace = Config.Font,
                    Text = "",
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 13
                }, SectionContent)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6)}, ButtonFrame)
                Utility:CreateInstance("UIStroke", {
                    Thickness = 1, Color = CurrentTheme.Border, Transparency = 0.5,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }, ButtonFrame)
                
                Utility:CreateInstance("TextLabel", {
                    Name = "ButtonTitle",
                    BackgroundTransparency = 1,
                    Position = UDim2.new(0, 36, 0, 0),
                    Size = UDim2.new(1, -50, 1, 0),
                    FontFace = Config.Font,
                    Text = buttonName,
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 13,
                    TextXAlignment = Enum.TextXAlignment.Left
                }, ButtonFrame)
                
                ButtonFrame.MouseButton1Click:Connect(function()
                    pcall(callback)
                end)
                
                UpdateSectionSize()
                
                return {}
            end
            
            -- Toggle COM IMAGEM
            function Elements:NewToggle(toggleName, description, default, imageId, callback)                default = default or false
                imageId = imageId or ""
                callback = callback or function(state) end
                local toggled = default
                
                local ToggleFrame = Utility:CreateInstance("TextButton", {
                    Name = toggleName .. "_Toggle",
                    BackgroundColor3 = CurrentTheme.Glass,
                    BackgroundTransparency = 0.6,
                    BorderSizePixel = 0,
                    Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight),
                    AutoButtonColor = false,
                    FontFace = Config.Font,
                    Text = "",
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 13
                }, SectionContent)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6)}, ToggleFrame)
                Utility:CreateInstance("UIStroke", {
                    Thickness = 1, Color = CurrentTheme.Border, Transparency = 0.5,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }, ToggleFrame)
                
                -- Imagem do Toggle
                if imageId ~= "" then
                    Utility:CreateInstance("ImageLabel", {
                        Name = "ToggleImage",
                        BackgroundTransparency = 1,
                        Position = UDim2.new(0, 10, 0.5, 0),
                        AnchorPoint = Vector2.new(0, 0.5),
                        Size = UDim2.new(0, 20, 0, 20),
                        Image = imageId,
                        ImageColor3 = CurrentTheme.Accent
                    }, ToggleFrame)
                end
                
                Utility:CreateInstance("TextLabel", {
                    Name = "ToggleTitle",
                    BackgroundTransparency = 1,
                    Position = imageId ~= "" and UDim2.new(0, 38, 0, 0) or UDim2.new(0, 14, 0, 0),
                    Size = UDim2.new(1, -60, 1, 0),
                    FontFace = Config.Font,
                    Text = toggleName,
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 13,
                    TextXAlignment = Enum.TextXAlignment.Left
                }, ToggleFrame)
                
                -- Toggle Indicator                local ToggleIndicator = Utility:CreateInstance("Frame", {
                    Name = "ToggleIndicator",
                    BackgroundColor3 = CurrentTheme.Border,
                    Position = UDim2.new(1, -10, 0.5, 0),
                    AnchorPoint = Vector2.new(1, 0.5),
                    Size = UDim2.new(0, 36, 0, 18)
                }, ToggleFrame)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, ToggleIndicator)
                
                local IndicatorCircle = Utility:CreateInstance("Frame", {
                    Name = "IndicatorCircle",
                    BackgroundColor3 = CurrentTheme.Text,
                    Position = UDim2.new(0, 2, 0.5, 0),
                    AnchorPoint = Vector2.new(0, 0.5),
                    Size = UDim2.new(0, 14, 0, 14)
                }, ToggleIndicator)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, IndicatorCircle)
                
                local function UpdateToggleState()
                    if toggled then
                        Utility:TweenObject(ToggleIndicator, {BackgroundColor3 = CurrentTheme.Accent}, 0.2)
                        Utility:TweenObject(IndicatorCircle, {Position = UDim2.new(1, -16, 0.5, 0)}, 0.2)
                    else
                        Utility:TweenObject(ToggleIndicator, {BackgroundColor3 = CurrentTheme.Border}, 0.2)
                        Utility:TweenObject(IndicatorCircle, {Position = UDim2.new(0, 2, 0.5, 0)}, 0.2)
                    end
                end
                
                UpdateToggleState()
                
                ToggleFrame.MouseButton1Click:Connect(function()
                    toggled = not toggled
                    UpdateToggleState()
                    pcall(function() callback(toggled) end)
                end)
                
                UpdateSectionSize()
                
                local ToggleFunctions = {}
                function ToggleFunctions:SetState(newState)
                    toggled = newState
                    UpdateToggleState()
                    pcall(function() callback(toggled) end)
                end
                function ToggleFunctions:GetState()
                    return toggled
                end
                                return ToggleFunctions
            end
            
            -- Slider
            function Elements:NewSlider(sliderName, description, minValue, maxValue, defaultValue, callback)
                minValue = minValue or 0
                maxValue = maxValue or 100
                defaultValue = defaultValue or minValue
                callback = callback or function(value) end
                local currentValue = defaultValue
                
                local SliderFrame = Utility:CreateInstance("Frame", {
                    Name = sliderName .. "_Slider",
                    BackgroundColor3 = CurrentTheme.Glass,
                    BackgroundTransparency = 0.6,
                    BorderSizePixel = 0,
                    Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight + 20),
                    ClipsDescendants = true
                }, SectionContent)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6)}, SliderFrame)
                
                Utility:CreateInstance("TextLabel", {
                    Name = "SliderTitle",
                    BackgroundTransparency = 1,
                    Position = UDim2.new(0, 10, 0, 4),
                    Size = UDim2.new(1, -60, 0, 16),
                    FontFace = Config.Font,
                    Text = sliderName,
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 12,
                    TextXAlignment = Enum.TextXAlignment.Left
                }, SliderFrame)
                
                local SliderValue = Utility:CreateInstance("TextLabel", {
                    Name = "SliderValue",
                    BackgroundTransparency = 1,
                    Position = UDim2.new(1, -10, 0, 4),
                    AnchorPoint = Vector2.new(1, 0),
                    Size = UDim2.new(0, 50, 0, 16),
                    FontFace = Config.Font,
                    Text = tostring(currentValue),
                    TextColor3 = CurrentTheme.Accent,
                    TextSize = 12,
                    TextXAlignment = Enum.TextXAlignment.Right
                }, SliderFrame)
                
                local SliderBar = Utility:CreateInstance("Frame", {
                    Name = "SliderBar",
                    BackgroundColor3 = CurrentTheme.Border,                    Position = UDim2.new(0, 10, 0, 26),
                    Size = UDim2.new(1, -20, 0, 6)
                }, SliderFrame)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, SliderBar)
                
                local SliderProgress = Utility:CreateInstance("Frame", {
                    Name = "SliderProgress",
                    BackgroundColor3 = CurrentTheme.Accent,
                    Size = UDim2.new(0, 0, 1, 0)
                }, SliderBar)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, SliderProgress)
                
                local function UpdateSliderValue(value)
                    currentValue = math.clamp(value, minValue, maxValue)
                    SliderValue.Text = tostring(math.floor(currentValue))
                    local percentage = (currentValue - minValue) / (maxValue - minValue)
                    Utility:TweenObject(SliderProgress, {Size = UDim2.new(percentage, 0, 1, 0)}, 0.1)
                    pcall(function() callback(currentValue) end)
                end
                
                UpdateSliderValue(defaultValue)
                
                UpdateSectionSize()
                
                local SliderFunctions = {}
                function SliderFunctions:SetValue(value)
                    UpdateSliderValue(value)
                end
                function SliderFunctions:GetValue()
                    return currentValue
                end
                
                return SliderFunctions
            end
            
            -- Label
            function Elements:NewLabel(labelText, labelType)
                labelText = labelText or "Label"
                
                local LabelFrame = Utility:CreateInstance("Frame", {
                    Name = labelText .. "_Label",
                    BackgroundColor3 = CurrentTheme.Glass,
                    BackgroundTransparency = 0.6,
                    BorderSizePixel = 0,
                    Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight)
                }, SectionContent)
                
                Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(0, 6)}, LabelFrame)                
                Utility:CreateInstance("TextLabel", {
                    Name = "LabelText",
                    BackgroundTransparency = 1,
                    Position = UDim2.new(0, 10, 0, 0),
                    Size = UDim2.new(1, -20, 1, 0),
                    FontFace = Config.Font,
                    Text = "  " .. labelText,
                    TextColor3 = CurrentTheme.Text,
                    TextSize = 13,
                    TextXAlignment = Enum.TextXAlignment.Left
                }, LabelFrame)
                
                UpdateSectionSize()
                
                return {}
            end
            
            return Elements
        end
        
        return Sections
    end
    
    return Tabs
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“¦ RETURN FINAL DA LIBRARY
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

K9Library.Version = "1.0.0"
K9Library.Author = "K9 Development"

print("[K9 UI] Library Carregada - VersÃ£o: " .. K9Library.Version)

return K9Library
