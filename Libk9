-- ═══════════════════════════════════════════════════════════════
-- K9 UI LIBRARY - VERSÃO FINAL FUNCIONAL
-- Parte 1/4: Estrutura Base e Serviços
-- Baseada em MyUILib3 (Funcional)
-- ═══════════════════════════════════════════════════════════════

local K9Library = {}
local Utility = {}
local Objects = {}

-- Serviços
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local LocalPlayer = Players.LocalPlayer

-- Mouse com verificação
local Mouse = pcall(function() return LocalPlayer:GetMouse() end) and LocalPlayer:GetMouse() or nil

-- Font com fallback
local CustomFont = Enum.Font.Gotham
pcall(function()
    CustomFont = Font.new("rbxassetid://12187375716")
end)

-- Configurações
local Config = {
    Font = CustomFont,
    Theme = {
        Background = Color3.fromRGB(40, 40, 40),
        Glass = Color3.fromRGB(26, 26, 26),
        Accent = Color3.fromRGB(100, 150, 255),
        Text = Color3.fromRGB(255, 255, 255),
        TextSecondary = Color3.fromRGB(199, 199, 199),
        Border = Color3.fromRGB(81, 81, 81)
    },
    ParticleConfig = {
        ParticleCount = 30,
        Speed = 0.15,
        ConnectionDistance = 100,
        ParticleColor = Color3.fromRGB(100, 150, 255),
        LineColor = Color3.fromRGB(100, 150, 255),
        ParticleSize = 3,
        ParticleTransparency = 0.6,
        LineTransparency = 0.8,
        MaxConnectionsPerParticle = 3
    },
    Sizes = {        MainWidth = 500,
        MainHeight = 350,
        TabWidth = 120,
        ElementHeight = 28,
        CornerRadius = 6
    }
}

-- Utility Functions
function Utility:TweenObject(obj, properties, duration, style, direction)
    pcall(function()
        local tween = TweenService:Create(
            obj, 
            TweenInfo.new(duration or 0.2, style or Enum.EasingStyle.Quad, direction or Enum.EasingDirection.Out), 
            properties
        )
        tween:Play()
    end)
end

function Utility:CreateInstance(class, properties, parent)
    local success, obj = pcall(function()
        local instance = Instance.new(class)
        for prop, value in pairs(properties or {}) do
            pcall(function() instance[prop] = value end)
        end
        if parent then instance.Parent = parent end
        return instance
    end)
    return success and obj or nil
end

-- Variáveis Globais
local LibName = "K9_" .. tostring(math.random(1, 100)) .. tostring(math.random(1,50)) .. tostring(math.random(1, 100))
local MainGUI = nil
local ParticleSystem = nil
local CurrentTheme = Config.Theme
local focusing = false

-- Toggle UI
function K9Library:ToggleUI()
    pcall(function()
        if MainGUI and MainGUI.Parent then
            MainGUI.Enabled = not MainGUI.Enabled
        end
    end)
end

-- Destroy UI
function K9Library:DestroyUI()    pcall(function()
        if MainGUI and MainGUI.Parent then
            MainGUI:Destroy()
        end
    end)
end

-- Change Theme
function K9Library:ChangeTheme(newTheme)
    for key, value in pairs(newTheme) do
        CurrentTheme[key] = value
    end
end

-- Notify Function
function K9Library:Notify(title, message, duration)
    duration = duration or 3
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "K9 Menu | " .. title,
            Text = message,
            Duration = duration
        })
    end)
end

-- Sistema de Partículas
function K9Library:CreateParticleNetwork(parent, customConfig)
    local particleConfig = {}
    for key, value in pairs(Config.ParticleConfig) do
        particleConfig[key] = value
    end
    if customConfig then
        for key, value in pairs(customConfig) do
            particleConfig[key] = value
        end
    end
    
    local container = Utility:CreateInstance("Frame", {
        Name = "ParticleContainer",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        ClipsDescendants = true,
        ZIndex = 0
    }, parent)
    
    local particles = {}
    local connections = {}    local running = true
    
    for i = 1, particleConfig.ParticleCount do
        local particle = Utility:CreateInstance("Frame", {
            Name = "Particle_" .. i,
            BackgroundColor3 = particleConfig.ParticleColor,
            BackgroundTransparency = particleConfig.ParticleTransparency,
            BorderSizePixel = 0,
            Size = UDim2.new(0, particleConfig.ParticleSize, 0, particleConfig.ParticleSize),
            Position = UDim2.new(math.random() * 0.9 + 0.05, 0, math.random() * 0.9 + 0.05, 0),
            ZIndex = 1
        }, container)
        
        Utility:CreateInstance("UICorner", {CornerRadius = UDim.new(1, 0)}, particle)
        
        table.insert(particles, {
            Instance = particle,
            Velocity = Vector2.new(
                (math.random() - 0.5) * particleConfig.Speed,
                (math.random() - 0.5) * particleConfig.Speed
            )
        })
    end
    
    local function createLine(p1, p2, transparency)
        local distance = (p1 - p2).Magnitude
        if distance == 0 then return nil end
        
        local midpoint = (p1 + p2) / 2
        local angle = math.atan2(p2.Y - p1.Y, p2.X - p1.X)
        
        return Utility:CreateInstance("Frame", {
            BackgroundColor3 = particleConfig.LineColor,
            BackgroundTransparency = transparency,
            BorderSizePixel = 0,
            Size = UDim2.new(0, distance, 0, 1),
            Position = UDim2.new(0, midpoint.X - distance / 2, 0, midpoint.Y - 0.5),
            Rotation = math.deg(angle),
            ZIndex = 0
        }, container)
    end
    
    local renderConnection
    renderConnection = RunService.RenderStepped:Connect(function()
        if not running or not container.Parent then
            if renderConnection then renderConnection:Disconnect() end
            return
        end
        
        for _, particleData in ipairs(particles) do            local particle = particleData.Instance
            local pos = particle.Position
            local newX = pos.X.Offset + particleData.Velocity.X
            local newY = pos.Y.Offset + particleData.Velocity.Y
            
            if newX <= 0 or newX >= container.AbsoluteSize.X - particleConfig.ParticleSize then
                particleData.Velocity = Vector2.new(-particleData.Velocity.X, particleData.Velocity.Y)
            end
            if newY <= 0 or newY >= container.AbsoluteSize.Y - particleConfig.ParticleSize then
                particleData.Velocity = Vector2.new(particleData.Velocity.X, -particleData.Velocity.Y)
            end
            
            pcall(function()
                particle.Position = UDim2.new(
                    pos.X.Scale,
                    math.clamp(newX, 0, container.AbsoluteSize.X - particleConfig.ParticleSize),
                    pos.Y.Scale,
                    math.clamp(newY, 0, container.AbsoluteSize.Y - particleConfig.ParticleSize)
                )
            end)
        end
        
        for _, line in ipairs(connections) do
            pcall(function() line:Destroy() end)
        end
        connections = {}
        
        local maxConnections = particleConfig.MaxConnectionsPerParticle
        for i = 1, #particles do
            local connectionCount = 0
            for j = i + 1, #particles do
                if connectionCount >= maxConnections then break end
                
                local pos1 = particles[i].Instance.AbsolutePosition + particles[i].Instance.AbsoluteSize / 2
                local pos2 = particles[j].Instance.AbsolutePosition + particles[j].Instance.AbsoluteSize / 2
                local distance = (pos1 - pos2).Magnitude
                
                if distance <= particleConfig.ConnectionDistance then
                    local transparency = math.clamp(1 - (distance / particleConfig.ConnectionDistance), 
                        particleConfig.LineTransparency - 0.2, particleConfig.LineTransparency + 0.2)
                    local line = createLine(pos1, pos2, transparency)
                    if line then
                        table.insert(connections, line)
                        connectionCount = connectionCount + 1
                    end
                end
            end
        end
    end)
        return {
        Container = container,
        Destroy = function()
            running = false
            if renderConnection then renderConnection:Disconnect() end
            for _, line in ipairs(connections) do pcall(function() line:Destroy() end) end
            pcall(function() container:Destroy() end)
        end
    }
end

-- Dragging System
function K9Library:DraggingEnabled(frame, parent)
    parent = parent or frame
    local dragging = false
    local dragInput, mousePos, framePos
    
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            mousePos = input.Position
            framePos = parent.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - mousePos
            parent.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
        end
    end)
end

print("[K9 UI] Parte 1/4 Carregada")
-- ═══════════════════════════════════════════════════════════════
-- K9 UI LIBRARY - VERSÃO FINAL FUNCIONAL
-- Parte 2/4: UI Principal
-- Baseada em MyUILib3 (Funcional)
-- ═══════════════════════════════════════════════════════════════

function K9Library:CreateLib(libName, customTheme)
    if customTheme then
        for key, value in pairs(customTheme) do
            CurrentTheme[key] = value
        end
    end
    
    -- Remove duplicatas
    pcall(function()
        for _, gui in ipairs(CoreGui:GetChildren()) do
            if gui:IsA("ScreenGui") and gui.Name:find("K9_") then
                gui:Destroy()
            end
        end
    end)
    
    -- ScreenGui
    MainGUI = Instance.new("ScreenGui")
    MainGUI.Name = LibName
    MainGUI.ResetOnSpawn = false
    MainGUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    MainGUI.DisplayOrder = 100
    MainGUI.IgnoreGuiInset = true
    MainGUI.Parent = CoreGui
    
    -- Main Frame
    local Main = Instance.new("Frame")
    Main.Name = "Main"
    Main.Parent = MainGUI
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.BackgroundColor3 = CurrentTheme.Background
    Main.Position = UDim2.new(0.5, 0, 0.5, 0)
    Main.Size = UDim2.new(0, Config.Sizes.MainWidth, 0, Config.Sizes.MainHeight)
    Main.ClipsDescendants = true
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, Config.Sizes.CornerRadius)
    MainCorner.Parent = Main
    
    -- TopBar
    local TopBar = Instance.new("Frame")
    TopBar.Name = "TopBar"
    TopBar.Parent = Main
    TopBar.BackgroundColor3 = CurrentTheme.Glass    TopBar.Size = UDim2.new(1, 0, 0, 30)
    
    local TopBarCorner = Instance.new("UICorner")
    TopBarCorner.CornerRadius = UDim.new(0, Config.Sizes.CornerRadius)
    TopBarCorner.Parent = TopBar
    
    -- Title
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Parent = TopBar
    Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Title.BackgroundTransparency = 1
    Title.Size = UDim2.new(0.5, 0, 1, 0)
    Title.FontFace = Config.Font
    Title.Text = libName or "K9 Library"
    Title.TextColor3 = CurrentTheme.Text
    Title.TextSize = 14
    Title.TextXAlignment = Enum.TextXAlignment.Left
    
    local TitlePadding = Instance.new("UIPadding")
    TitlePadding.Parent = Title
    TitlePadding.PaddingLeft = UDim.new(0, 8)
    TitlePadding.PaddingTop = UDim.new(0, 1)
    
    -- Close Button
    local Close = Instance.new("ImageButton")
    Close.Name = "Close"
    Close.Parent = TopBar
    Close.AnchorPoint = Vector2.new(1, 0.5)
    Close.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Close.BackgroundTransparency = 1
    Close.Position = UDim2.new(1, -8, 0.5, 0)
    Close.Size = UDim2.new(0, 14, 0, 14)
    Close.Image = "rbxassetid://10884453403"
    
    -- Line
    local Line = Instance.new("Frame")
    Line.Name = "Line"
    Line.Parent = TopBar
    Line.AnchorPoint = Vector2.new(0, 1)
    Line.BackgroundColor3 = CurrentTheme.Border
    Line.BorderSizePixel = 0
    Line.Position = UDim2.new(0, 0, 1, 0)
    Line.Size = UDim2.new(1, 0, 0, 1)
    
    -- Shadow
    local DropShadowHolder = Instance.new("Frame")
    DropShadowHolder.Name = "DropShadowHolder"
    DropShadowHolder.Parent = Main
    DropShadowHolder.BackgroundTransparency = 1    DropShadowHolder.BorderSizePixel = 0
    DropShadowHolder.Size = UDim2.new(1, 0, 1, 0)
    DropShadowHolder.ZIndex = 0
    
    local DropShadow = Instance.new("ImageLabel")
    DropShadow.Name = "DropShadow"
    DropShadow.Parent = DropShadowHolder
    DropShadow.AnchorPoint = Vector2.new(0.5, 0.5)
    DropShadow.BackgroundTransparency = 1
    DropShadow.BorderSizePixel = 0
    DropShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
    DropShadow.Size = UDim2.new(1, 44, 1, 44)
    DropShadow.ZIndex = 0
    DropShadow.Image = "rbxassetid://6015897843"
    DropShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    DropShadow.ImageTransparency = 0.5
    DropShadow.ScaleType = Enum.ScaleType.Slice
    DropShadow.SliceCenter = Rect.new(49, 49, 450, 450)
    
    -- Navigation
    local Navigation = Instance.new("Frame")
    Navigation.Name = "Navigation"
    Navigation.Parent = Main
    Navigation.BackgroundColor3 = CurrentTheme.Glass
    Navigation.BorderSizePixel = 0
    Navigation.Position = UDim2.new(0, 0, 0, 30)
    Navigation.Size = UDim2.new(0, Config.Sizes.TabWidth, 1, -30)
    Navigation.ClipsDescendants = true
    
    local NavCorner = Instance.new("UICorner")
    NavCorner.CornerRadius = UDim.new(0, 0, 0, Config.Sizes.CornerRadius)
    NavCorner.Parent = Navigation
    
    local Hide = Instance.new("Frame")
    Hide.Name = "Hide"
    Hide.Parent = Navigation
    Hide.BackgroundColor3 = CurrentTheme.Glass
    Hide.BorderSizePixel = 0
    Hide.Size = UDim2.new(1, 0, 0, 20)
    
    local Hide2 = Instance.new("Frame")
    Hide2.Name = "Hide2"
    Hide2.Parent = Navigation
    Hide2.AnchorPoint = Vector2.new(1, 0)
    Hide2.BackgroundColor3 = CurrentTheme.Glass
    Hide2.BorderSizePixel = 0
    Hide2.Position = UDim2.new(1, 0, 0, 0)
    Hide2.Size = UDim2.new(0, 20, 1, 0)
    
    local ButtonHolder = Instance.new("Frame")    ButtonHolder.Name = "ButtonHolder"
    ButtonHolder.Parent = Navigation
    ButtonHolder.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ButtonHolder.BackgroundTransparency = 1
    ButtonHolder.Size = UDim2.new(1, 0, 1, 0)
    
    local ButtonPadding = Instance.new("UIPadding")
    ButtonPadding.Parent = ButtonHolder
    ButtonPadding.PaddingBottom = UDim.new(0, 8)
    ButtonPadding.PaddingTop = UDim.new(0, 8)
    
    local ButtonListLayout = Instance.new("UIListLayout")
    ButtonListLayout.Parent = ButtonHolder
    ButtonListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ButtonListLayout.Padding = UDim.new(0, 1)
    
    local NavLine = Instance.new("Frame")
    NavLine.Name = "Line"
    NavLine.Parent = Navigation
    NavLine.BackgroundColor3 = CurrentTheme.Border
    NavLine.BorderSizePixel = 0
    NavLine.Position = UDim2.new(1, 0, 0, 0)
    NavLine.Size = UDim2.new(0, 1, 1, 0)
    
    -- Content Container
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Parent = Main
    ContentContainer.AnchorPoint = Vector2.new(1, 0)
    ContentContainer.BackgroundColor3 = CurrentTheme.Glass
    ContentContainer.BackgroundTransparency = 1
    ContentContainer.Position = UDim2.new(1, -6, 0, 36)
    ContentContainer.Size = UDim2.new(1, -Config.Sizes.TabWidth - 6, 1, -42)
    ContentContainer.ClipsDescendants = true
    
    local TabsFolder = Instance.new("Folder")
    TabsFolder.Name = "TabsFolder"
    TabsFolder.Parent = ContentContainer
    
    -- Particles
    ParticleSystem = K9Library:CreateParticleNetwork(Main, Config.ParticleConfig)
    
    -- Dragging
    K9Library:DraggingEnabled(TopBar, Main)
    
    -- Close Event
    Close.MouseButton1Click:Connect(function()
        TweenService:Create(Close, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
            ImageTransparency = 1
        }):Play()        task.wait()
        TweenService:Create(Main, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0, Main.AbsolutePosition.X + (Main.AbsoluteSize.X / 2), 0, Main.AbsolutePosition.Y + (Main.AbsoluteSize.Y / 2))
        }):Play()
        ContentContainer.Visible = false
        Navigation.Visible = false
        DropShadowHolder.Visible = false
        TopBar.Visible = false
        task.wait(1.5)
        if ParticleSystem then ParticleSystem:Destroy() end
        MainGUI:Destroy()
    end)
    
    -- Tabs System
    local Tabs = {}
    local first = true
    local tabButtons = {}
    
    function Tabs:Tab(TabText, TabIcon)
        TabText = TabText or "Untitled"
        TabIcon = TabIcon or ""
        
        local Active = Instance.new("TextButton")
        Active.Name = TabText .. "_TabButton"
        Active.Parent = ButtonHolder
        Active.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Active.BackgroundTransparency = 1
        Active.BorderSizePixel = 0
        Active.Size = UDim2.new(1, 0, 0, 28)
        Active.FontFace = Config.Font
        Active.Text = TabText
        Active.TextColor3 = CurrentTheme.TextSecondary
        Active.TextSize = 12
        Active.TextXAlignment = Enum.TextXAlignment.Left
        
        local ActivePadding = Instance.new("UIPadding")
        ActivePadding.Parent = Active
        ActivePadding.PaddingLeft = UDim.new(0, 28)
        
        local Icon = Instance.new("ImageLabel")
        Icon.Name = "Icon"
        Icon.Parent = Active
        Icon.AnchorPoint = Vector2.new(0, 0.5)
        Icon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        Icon.BackgroundTransparency = 1
        Icon.Position = UDim2.new(0, 8, 0.5, 0)
        Icon.Size = UDim2.new(0, 20, 0, 20)
        Icon.Image = TabIcon
                local NewTab = Instance.new("ScrollingFrame")
        NewTab.Name = "NewTab"
        NewTab.Parent = TabsFolder
        NewTab.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        NewTab.BackgroundTransparency = 1
        NewTab.BorderSizePixel = 0
        NewTab.Selectable = false
        NewTab.Size = UDim2.new(1, 0, 1, 0)
        NewTab.AutomaticCanvasSize = Enum.AutomaticSize.Y
        NewTab.CanvasSize = UDim2.new(0, 0, 0, 0)
        NewTab.ScrollBarThickness = 4
        NewTab.ScrollBarImageColor3 = CurrentTheme.Accent
        NewTab.Visible = false
        NewTab.ClipsDescendants = true
        
        local TabPadding = Instance.new("UIPadding")
        TabPadding.Parent = NewTab
        TabPadding.PaddingBottom = UDim.new(0, 1)
        TabPadding.PaddingLeft = UDim.new(0, 1)
        TabPadding.PaddingRight = UDim.new(0, 1)
        TabPadding.PaddingTop = UDim.new(0, 1)
        
        local TabListLayout = Instance.new("UIListLayout")
        TabListLayout.Parent = NewTab
        TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        TabListLayout.Padding = UDim.new(0, 6)
        
        if first then
            first = false
            NewTab.Visible = true
            Active.BackgroundTransparency = 0.9
            Active.TextColor3 = CurrentTheme.Text
        else
            NewTab.Visible = false
            Active.BackgroundTransparency = 1
            Active.TextColor3 = CurrentTheme.TextSecondary
        end
        
        Active.MouseButton1Click:Connect(function()
            for _, v in next, TabsFolder:GetChildren() do
                v.Visible = false
            end
            NewTab.Visible = true
            
            for _, v in next, ButtonHolder:GetChildren() do
                if v:IsA("TextButton") then
                    Utility:TweenObject(v, {BackgroundTransparency = 1}, 0.2)
                    Utility:TweenObject(v, {TextColor3 = CurrentTheme.TextSecondary}, 0.2)
                end
            end            
            Utility:TweenObject(Active, {BackgroundTransparency = 0.9}, 0.2)
            Utility:TweenObject(Active, {TextColor3 = CurrentTheme.Text}, 0.2)
            
            task.wait(0.1)
            NewTab.CanvasSize = UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y + 2)
        end)
        
        table.insert(tabButtons, Active)
        
        -- Sections
        local Elements = {}
        
        function Elements:Section(title)
            title = title or "Section"
            
            local Section = Instance.new("Frame")
            Section.Name = "Section"
            Section.Parent = NewTab
            Section.BackgroundColor3 = CurrentTheme.Glass
            Section.BackgroundTransparency = 1
            Section.Size = UDim2.new(1, 0, 0, 32)
            
            local SectionTitle = Instance.new("TextLabel")
            SectionTitle.Name = "Title"
            SectionTitle.Parent = Section
            SectionTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SectionTitle.BackgroundTransparency = 1
            SectionTitle.Size = UDim2.new(1, -20, 1, 0)
            SectionTitle.FontFace = Config.Font
            SectionTitle.Text = title
            SectionTitle.TextColor3 = CurrentTheme.Accent
            SectionTitle.TextSize = 14
            SectionTitle.TextXAlignment = Enum.TextXAlignment.Left
            
            local SectionPadding = Instance.new("UIPadding")
            SectionPadding.Parent = Section
            SectionPadding.PaddingBottom = UDim.new(0, 6)
            SectionPadding.PaddingLeft = UDim.new(0, 6)
            SectionPadding.PaddingRight = UDim.new(0, 6)
            SectionPadding.PaddingTop = UDim.new(0, 6)
            
            return Section
        end
        
        return Elements
    end
    
    return Tabs
end
print("[K9 UI] Parte 2/4 Carregada")
-- ═══════════════════════════════════════════════════════════════
-- K9 UI LIBRARY - VERSÃO FINAL FUNCIONAL
-- Parte 3/4: Elementos
-- Baseada em MyUILib3 (Funcional)
-- ═══════════════════════════════════════════════════════════════

-- Adicionar dentro de Elements na Parte 2/4, antes do "return Elements"

-- Button
function Elements:Button(ButtonName, callback)
    ButtonName = ButtonName or "Button"
    callback = callback or function() end
    
    local Button = Instance.new("TextButton")
    Button.Name = "Button"
    Button.Parent = NewTab
    Button.BackgroundColor3 = CurrentTheme.Glass
    Button.ClipsDescendants = true
    Button.Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight)
    Button.AutoButtonColor = false
    Button.FontFace = Config.Font
    Button.Text = ""
    Button.TextColor3 = Color3.fromRGB(0, 0, 0)
    Button.TextSize = 14
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 4)
    ButtonCorner.Parent = Button
    
    local ButtonTitle = Instance.new("TextLabel")
    ButtonTitle.Name = "Title"
    ButtonTitle.Parent = Button
    ButtonTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ButtonTitle.BackgroundTransparency = 1
    ButtonTitle.Size = UDim2.new(1, -20, 1, 0)
    ButtonTitle.FontFace = Config.Font
    ButtonTitle.Text = ButtonName
    ButtonTitle.TextColor3 = CurrentTheme.Text
    ButtonTitle.TextSize = 14
    ButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local ButtonPadding = Instance.new("UIPadding")
    ButtonPadding.Parent = Button
    ButtonPadding.PaddingBottom = UDim.new(0, 6)
    ButtonPadding.PaddingLeft = UDim.new(0, 6)
    ButtonPadding.PaddingRight = UDim.new(0, 6)
    ButtonPadding.PaddingTop = UDim.new(0, 6)
    
    local Sample = Instance.new("ImageLabel")
    Sample.Name = "Sample"    Sample.Parent = Button
    Sample.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Sample.BackgroundTransparency = 1
    Sample.Image = "http://www.roblox.com/asset/?id=4560909609"
    Sample.ImageColor3 = Color3.fromRGB(0, 0, 0)
    Sample.ImageTransparency = 0.6
    
    local ButtonStroke = Instance.new("UIStroke")
    ButtonStroke.Name = "UIStroke"
    ButtonStroke.Parent = Button
    ButtonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    ButtonStroke.Color = CurrentTheme.Border
    ButtonStroke.LineJoinMode = Enum.LineJoinMode.Round
    ButtonStroke.Thickness = 1
    ButtonStroke.Transparency = 0
    
    local btn = Button
    local sample = Sample
    
    btn.MouseButton1Click:Connect(function()
        if not focusing then
            pcall(callback)
            local c = sample:Clone()
            c.Parent = btn
            local x, y = (Mouse.X - c.AbsolutePosition.X), (Mouse.Y - c.AbsolutePosition.Y)
            c.Position = UDim2.new(0, x, 0, y)
            local len, size = 0.35, nil
            if btn.AbsoluteSize.X >= btn.AbsoluteSize.Y then
                size = (btn.AbsoluteSize.X * 1.5)
            else
                size = (btn.AbsoluteSize.Y * 1.5)
            end
            c:TweenSizeAndPosition(UDim2.new(0, size, 0, size), UDim2.new(0.5, (-size / 2), 0.5, (-size / 2)), 'Out', 'Quad', len, true, nil)
            for i = 1, 10 do
                c.ImageTransparency = c.ImageTransparency + 0.05
                task.wait(len / 12)
            end
            c:Destroy()
        end
    end)
    
    local hovering = false
    btn.MouseEnter:Connect(function()
        if not focusing then
            Utility:TweenObject(btn, {BackgroundColor3 = Color3.fromRGB(54, 54, 54)}, 0.1)
            Utility:TweenObject(ButtonStroke, {Color = Color3.fromRGB(162, 162, 162)}, 0.1)
            hovering = true
        end
    end)
        btn.MouseLeave:Connect(function()
        if not focusing then
            Utility:TweenObject(btn, {BackgroundColor3 = CurrentTheme.Glass}, 0.1)
            Utility:TweenObject(ButtonStroke, {Color = CurrentTheme.Border}, 0.1)
            hovering = false
        end
    end)
    
    return {}
end

-- Toggle
function Elements:Toggle(ToggleName, default, callback)
    ToggleName = ToggleName or "Toggle"
    default = default or false
    callback = callback or function() end
    local toggled = default
    
    local Toggle = Instance.new("TextButton")
    Toggle.Name = "Toggle"
    Toggle.Parent = NewTab
    Toggle.BackgroundColor3 = CurrentTheme.Glass
    Toggle.ClipsDescendants = true
    Toggle.Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight)
    Toggle.AutoButtonColor = false
    Toggle.FontFace = Config.Font
    Toggle.Text = ""
    Toggle.TextColor3 = Color3.fromRGB(0, 0, 0)
    Toggle.TextSize = 14
    
    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 4)
    ToggleCorner.Parent = Toggle
    
    local ToggleTitle = Instance.new("TextLabel")
    ToggleTitle.Name = "Title"
    ToggleTitle.Parent = Toggle
    ToggleTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ToggleTitle.BackgroundTransparency = 1
    ToggleTitle.Size = UDim2.new(1, -26, 1, 0)
    ToggleTitle.FontFace = Config.Font
    ToggleTitle.Text = ToggleName
    ToggleTitle.TextColor3 = CurrentTheme.Text
    ToggleTitle.TextSize = 14
    ToggleTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local TogglePadding = Instance.new("UIPadding")
    TogglePadding.Parent = Toggle
    TogglePadding.PaddingBottom = UDim.new(0, 6)
    TogglePadding.PaddingLeft = UDim.new(0, 6)    TogglePadding.PaddingRight = UDim.new(0, 6)
    TogglePadding.PaddingTop = UDim.new(0, 6)
    
    local ToggleStroke = Instance.new("UIStroke")
    ToggleStroke.Name = "UIStroke"
    ToggleStroke.Parent = Toggle
    ToggleStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    ToggleStroke.Color = CurrentTheme.Border
    ToggleStroke.LineJoinMode = Enum.LineJoinMode.Round
    ToggleStroke.Thickness = 1
    ToggleStroke.Transparency = 0
    
    local CheckmarkHolder = Instance.new("Frame")
    CheckmarkHolder.Name = "CheckmarkHolder"
    CheckmarkHolder.Parent = Toggle
    CheckmarkHolder.AnchorPoint = Vector2.new(1, 0.5)
    CheckmarkHolder.BackgroundColor3 = Color3.fromRGB(63, 63, 63)
    CheckmarkHolder.Position = UDim2.new(1, -3, 0.5, 0)
    CheckmarkHolder.Size = UDim2.new(0, 16, 0, 16)
    
    local CheckmarkCorner = Instance.new("UICorner")
    CheckmarkCorner.CornerRadius = UDim.new(0, 2)
    CheckmarkCorner.Parent = CheckmarkHolder
    
    local CheckmarkStroke = Instance.new("UIStroke")
    CheckmarkStroke.Name = "UIStroke"
    CheckmarkStroke.Parent = CheckmarkHolder
    CheckmarkStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    CheckmarkStroke.Color = CurrentTheme.Border
    CheckmarkStroke.LineJoinMode = Enum.LineJoinMode.Round
    CheckmarkStroke.Thickness = 1
    CheckmarkStroke.Transparency = 0
    
    local Sample = Instance.new("ImageLabel")
    Sample.Name = "Sample"
    Sample.Parent = Toggle
    Sample.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Sample.BackgroundTransparency = 1
    Sample.Image = "http://www.roblox.com/asset/?id=4560909609"
    Sample.ImageColor3 = Color3.fromRGB(0, 0, 0)
    Sample.ImageTransparency = 0.6
    
    local function UpdateToggleState()
        if toggled then
            Utility:TweenObject(CheckmarkHolder, {BackgroundColor3 = Color3.fromRGB(115, 191, 92)}, 0.15)
            Utility:TweenObject(CheckmarkStroke, {Color = Color3.fromRGB(0, 255, 59)}, 0.15)
        else
            Utility:TweenObject(CheckmarkHolder, {BackgroundColor3 = Color3.fromRGB(63, 63, 63)}, 0.15)
            Utility:TweenObject(CheckmarkStroke, {Color = CurrentTheme.Border}, 0.15)
        end    end
    
    UpdateToggleState()
    
    local btn = Toggle
    local sample = Sample
    
    Toggle.MouseButton1Click:Connect(function()
        if not focusing then
            toggled = not toggled
            UpdateToggleState()
            pcall(callback, toggled)
            
            local c = sample:Clone()
            c.Parent = btn
            local x, y = (Mouse.X - c.AbsolutePosition.X), (Mouse.Y - c.AbsolutePosition.Y)
            c.Position = UDim2.new(0, x, 0, y)
            local len, size = 0.35, nil
            if btn.AbsoluteSize.X >= btn.AbsoluteSize.Y then
                size = (btn.AbsoluteSize.X * 1.5)
            else
                size = (btn.AbsoluteSize.Y * 1.5)
            end
            c:TweenSizeAndPosition(UDim2.new(0, size, 0, size), UDim2.new(0.5, (-size / 2), 0.5, (-size / 2)), 'Out', 'Quad', len, true, nil)
            for i = 1, 10 do
                c.ImageTransparency = c.ImageTransparency + 0.05
                task.wait(len / 12)
            end
            c:Destroy()
        end
    end)
    
    local hovering = false
    btn.MouseEnter:Connect(function()
        if not focusing then
            Utility:TweenObject(btn, {BackgroundColor3 = Color3.fromRGB(54, 54, 54)}, 0.1)
            Utility:TweenObject(ToggleStroke, {Color = Color3.fromRGB(162, 162, 162)}, 0.1)
            hovering = true
        end
    end)
    
    btn.MouseLeave:Connect(function()
        if not focusing then
            Utility:TweenObject(btn, {BackgroundColor3 = CurrentTheme.Glass}, 0.1)
            Utility:TweenObject(ToggleStroke, {Color = CurrentTheme.Border}, 0.1)
            hovering = false
        end
    end)
    
    local ToggleFunctions = {}    function ToggleFunctions:SetState(newState)
        toggled = newState
        UpdateToggleState()
        pcall(callback, toggled)
    end
    function ToggleFunctions:GetState()
        return toggled
    end
    
    return ToggleFunctions
end

-- Slider
function Elements:Slider(SliderTitle, minvalue, maxvalue, default, callback)
    SliderTitle = SliderTitle or "Slider"
    minvalue = minvalue or 0
    maxvalue = maxvalue or 100
    default = default or minvalue
    callback = callback or function() end
    
    local Value
    local moveconnection
    local releaseconnection
    
    local Slider = Instance.new("Frame")
    Slider.Name = "Slider"
    Slider.Parent = NewTab
    Slider.BackgroundColor3 = CurrentTheme.Glass
    Slider.Size = UDim2.new(1, 0, 0, 38)
    
    local SliderCorner = Instance.new("UICorner")
    SliderCorner.CornerRadius = UDim.new(0, 4)
    SliderCorner.Parent = Slider
    
    local SliderStroke = Instance.new("UIStroke")
    SliderStroke.Name = "UIStroke"
    SliderStroke.Parent = Slider
    SliderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    SliderStroke.Color = CurrentTheme.Border
    SliderStroke.LineJoinMode = Enum.LineJoinMode.Round
    SliderStroke.Thickness = 1
    SliderStroke.Transparency = 0
    
    local SliderTitleLabel = Instance.new("TextLabel")
    SliderTitleLabel.Name = "Title"
    SliderTitleLabel.Parent = Slider
    SliderTitleLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    SliderTitleLabel.BackgroundTransparency = 1
    SliderTitleLabel.Size = UDim2.new(1, -24, 1, -10)
    SliderTitleLabel.FontFace = Config.Font    SliderTitleLabel.Text = SliderTitle
    SliderTitleLabel.TextColor3 = CurrentTheme.Text
    SliderTitleLabel.TextSize = 14
    SliderTitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local SliderPadding = Instance.new("UIPadding")
    SliderPadding.Parent = Slider
    SliderPadding.PaddingBottom = UDim.new(0, 6)
    SliderPadding.PaddingLeft = UDim.new(0, 6)
    SliderPadding.PaddingRight = UDim.new(0, 6)
    SliderPadding.PaddingTop = UDim.new(0, 6)
    
    local ValueLabel = Instance.new("TextLabel")
    ValueLabel.Name = "Value"
    ValueLabel.Parent = Slider
    ValueLabel.AnchorPoint = Vector2.new(1, 0)
    ValueLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ValueLabel.BackgroundTransparency = 1
    ValueLabel.Position = UDim2.new(1, 0, 0, 0)
    ValueLabel.Size = UDim2.new(0, 24, 1, -10)
    ValueLabel.FontFace = Config.Font
    ValueLabel.Text = tostring(default)
    ValueLabel.TextColor3 = CurrentTheme.Text
    ValueLabel.TextSize = 14
    ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
    
    local SliderButton = Instance.new("TextButton")
    SliderButton.Name = "SliderButton"
    SliderButton.Parent = Slider
    SliderButton.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
    SliderButton.BackgroundTransparency = 1
    SliderButton.Position = UDim2.new(0, 6, 0.846153855, 0)
    SliderButton.Size = UDim2.new(1, -12, 0, 4)
    SliderButton.Font = Enum.Font.SourceSans
    SliderButton.Text = ""
    SliderButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    SliderButton.TextSize = 14
    
    local SliderButtonStroke = Instance.new("UIStroke")
    SliderButtonStroke.Name = "UIStroke"
    SliderButtonStroke.Parent = SliderButton
    SliderButtonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    SliderButtonStroke.Color = Color3.fromRGB(63, 63, 63)
    SliderButtonStroke.LineJoinMode = Enum.LineJoinMode.Round
    SliderButtonStroke.Thickness = 1
    SliderButtonStroke.Transparency = 0
    
    local SliderButtonCorner = Instance.new("UICorner")
    SliderButtonCorner.CornerRadius = UDim.new(0, 4)
    SliderButtonCorner.Parent = SliderButton    
    local SliderInner = Instance.new("Frame")
    SliderInner.Name = "SliderInner"
    SliderInner.Parent = SliderButton
    SliderInner.BackgroundColor3 = CurrentTheme.Accent
    SliderInner.Size = UDim2.new(0, 0, 0, 4)
    
    local SliderInnerCorner = Instance.new("UICorner")
    SliderInnerCorner.CornerRadius = UDim.new(0, 4)
    SliderInnerCorner.Parent = SliderInner
    
    local function UpdateSliderValue()
        Value = math.floor((((tonumber(maxvalue) - tonumber(minvalue)) / SliderButton.AbsoluteSize.X) * SliderInner.AbsoluteSize.X) + tonumber(minvalue)) or 0
        ValueLabel.Text = tostring(Value)
        pcall(function() callback(Value) end)
    end
    
    SliderButton.MouseButton1Down:Connect(function()
        if not focusing then
            UpdateSliderValue()
            SliderInner.Size = UDim2.new(0, math.clamp(Mouse.X - SliderInner.AbsolutePosition.X, 0, SliderButton.AbsoluteSize.X), 0, 4)
            
            moveconnection = Mouse.Move:Connect(function()
                UpdateSliderValue()
                SliderInner.Size = UDim2.new(0, math.clamp(Mouse.X - SliderInner.AbsolutePosition.X, 0, SliderButton.AbsoluteSize.X), 0, 4)
            end)
            
            releaseconnection = UserInputService.InputEnded:Connect(function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    UpdateSliderValue()
                    SliderInner.Size = UDim2.new(0, math.clamp(Mouse.X - SliderInner.AbsolutePosition.X, 0, SliderButton.AbsoluteSize.X), 0, 4)
                    moveconnection:Disconnect()
                    releaseconnection:Disconnect()
                end
            end)
        end
    end)
    
    local SliderFunctions = {}
    function SliderFunctions:SetValue(value)
        Value = math.clamp(value, minvalue, maxvalue)
        ValueLabel.Text = tostring(Value)
        local percentage = (Value - minvalue) / (maxvalue - minvalue)
        SliderInner.Size = UDim2.new(percentage, 0, 0, 4)
        pcall(function() callback(Value) end)
    end
    function SliderFunctions:GetValue()
        return Value or default
    end
        return SliderFunctions
end

-- Dropdown
function Elements:Dropdown(DropdownName, options, default, callback)
    DropdownName = DropdownName or "Dropdown"
    options = options or {"Option 1", "Option 2"}
    default = default or options[1]
    callback = callback or function() end
    local selectedOption = default
    local isOpen = false
    
    local Dropdown = Instance.new("TextButton")
    Dropdown.Name = "Dropdown"
    Dropdown.Parent = NewTab
    Dropdown.BackgroundColor3 = CurrentTheme.Glass
    Dropdown.ClipsDescendants = true
    Dropdown.Size = UDim2.new(1, 0, 0, Config.Sizes.ElementHeight)
    Dropdown.AutoButtonColor = false
    Dropdown.FontFace = Config.Font
    Dropdown.Text = ""
    Dropdown.TextColor3 = Color3.fromRGB(0, 0, 0)
    Dropdown.TextSize = 14
    
    local DropdownCorner = Instance.new("UICorner")
    DropdownCorner.CornerRadius = UDim.new(0, 4)
    DropdownCorner.Parent = Dropdown
    
    local DropdownTitle = Instance.new("TextLabel")
    DropdownTitle.Name = "Title"
    DropdownTitle.Parent = Dropdown
    DropdownTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    DropdownTitle.BackgroundTransparency = 1
    DropdownTitle.Size = UDim2.new(0.75, -20, 1, 0)
    DropdownTitle.FontFace = Config.Font
    DropdownTitle.Text = DropdownName
    DropdownTitle.TextColor3 = CurrentTheme.Text
    DropdownTitle.TextSize = 14
    DropdownTitle.TextXAlignment = Enum.TextXAlignment.Left
    
    local DropdownPadding = Instance.new("UIPadding")
    DropdownPadding.Parent = Dropdown
    DropdownPadding.PaddingBottom = UDim.new(0, 6)
    DropdownPadding.PaddingLeft = UDim.new(0, 6)
    DropdownPadding.PaddingRight = UDim.new(0, 6)
    DropdownPadding.PaddingTop = UDim.new(0, 6)
    
    local DropdownStroke = Instance.new("UIStroke")
    DropdownStroke.Name = "UIStroke"
    DropdownStroke.Parent = Dropdown    DropdownStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    DropdownStroke.Color = CurrentTheme.Border
    DropdownStroke.LineJoinMode = Enum.LineJoinMode.Round
    DropdownStroke.Thickness = 1
    DropdownStroke.Transparency = 0
    
    local DropdownButton = Instance.new("TextLabel")
    DropdownButton.Name = "DropdownButton"
    DropdownButton.Parent = Dropdown
    DropdownButton.BackgroundColor3 = Color3.fromRGB(72, 72, 72)
    DropdownButton.BorderSizePixel = 0
    DropdownButton.Position = UDim2.new(0.73, 0, 0.15, 0)
    DropdownButton.Size = UDim2.new(0, 83, 0, 20)
    DropdownButton.ZIndex = 99
    DropdownButton.FontFace = Config.Font
    DropdownButton.Text = " " .. selectedOption
    DropdownButton.TextColor3 = CurrentTheme.Text
    DropdownButton.TextSize = 12
    DropdownButton.TextXAlignment = Enum.TextXAlignment.Left
    
    local DropdownButtonCorner = Instance.new("UICorner")
    DropdownButtonCorner.CornerRadius = UDim.new(0, 4)
    DropdownButtonCorner.Parent = DropdownButton
    
    local DropdownButtonStroke = Instance.new("UIStroke")
    DropdownButtonStroke.Name = "UIStroke"
    DropdownButtonStroke.Parent = DropdownButton
    DropdownButtonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    DropdownButtonStroke.Color = Color3.fromRGB(136, 136, 136)
    DropdownButtonStroke.LineJoinMode = Enum.LineJoinMode.Round
    DropdownButtonStroke.Thickness = 1
    DropdownButtonStroke.Transparency = 0
    
    local OptionsContainer = Instance.new("Frame")
    OptionsContainer.Name = "OptionsContainer"
    OptionsContainer.Parent = Dropdown
    OptionsContainer.BackgroundColor3 = CurrentTheme.Glass
    OptionsContainer.Position = UDim2.new(0.73, 0, 1, 0)
    OptionsContainer.Size = UDim2.new(0, 83, 0, 0)
    OptionsContainer.ZIndex = 100
    OptionsContainer.ClipsDescendants = true
    
    local OptionsContainerCorner = Instance.new("UICorner")
    OptionsContainerCorner.CornerRadius = UDim.new(0, 4)
    OptionsContainerCorner.Parent = OptionsContainer
    
    local OptionsContainerStroke = Instance.new("UIStroke")
    OptionsContainerStroke.Name = "UIStroke"
    OptionsContainerStroke.Parent = OptionsContainer
    OptionsContainerStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border    OptionsContainerStroke.Color = CurrentTheme.Border
    OptionsContainerStroke.LineJoinMode = Enum.LineJoinMode.Round
    OptionsContainerStroke.Thickness = 1
    OptionsContainerStroke.Transparency = 0
    
    local OptionsListLayout = Instance.new("UIListLayout")
    OptionsListLayout.Parent = OptionsContainer
    OptionsListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    OptionsListLayout.Padding = UDim.new(0, 2)
    
    for index, option in ipairs(options) do
        local OptionButton = Instance.new("TextButton")
        OptionButton.Name = "Option_" .. index
        OptionButton.Parent = OptionsContainer
        OptionButton.BackgroundColor3 = CurrentTheme.Glass
        OptionButton.Size = UDim2.new(1, 0, 0, 20)
        OptionButton.FontFace = Config.Font
        OptionButton.Text = " " .. option
        OptionButton.TextColor3 = CurrentTheme.Text
        OptionButton.TextSize = 12
        OptionButton.TextXAlignment = Enum.TextXAlignment.Left
        
        local OptionButtonCorner = Instance.new("UICorner")
        OptionButtonCorner.CornerRadius = UDim.new(0, 4)
        OptionButtonCorner.Parent = OptionButton
        
        OptionButton.MouseButton1Click:Connect(function()
            selectedOption = option
            DropdownButton.Text = " " .. selectedOption
            isOpen = false
            Utility:TweenObject(OptionsContainer, {Size = UDim2.new(0, 83, 0, 0)}, 0.2)
            task.wait(0.2)
            OptionsContainer.Visible = false
            pcall(function() callback(selectedOption) end)
        end)
    end
    
    Dropdown.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        if isOpen then
            OptionsContainer.Visible = true
            local optionCount = #options
            local targetHeight = math.min(optionCount * 20, 100)
            Utility:TweenObject(OptionsContainer, {Size = UDim2.new(0, 83, 0, targetHeight)}, 0.2)
        else
            Utility:TweenObject(OptionsContainer, {Size = UDim2.new(0, 83, 0, 0)}, 0.2)
            task.wait(0.2)
            OptionsContainer.Visible = false
        end
    end)    
    local hovering = false
    Dropdown.MouseEnter:Connect(function()
        if not focusing then
            Utility:TweenObject(Dropdown, {BackgroundColor3 = Color3.fromRGB(54, 54, 54)}, 0.1)
            Utility:TweenObject(DropdownStroke, {Color = Color3.fromRGB(162, 162, 162)}, 0.1)
            hovering = true
        end
    end)
    
    Dropdown.MouseLeave:Connect(function()
        if not focusing then
            Utility:TweenObject(Dropdown, {BackgroundColor3 = CurrentTheme.Glass}, 0.1)
            Utility:TweenObject(DropdownStroke, {Color = CurrentTheme.Border}, 0.1)
            hovering = false
        end
    end)
    
    local DropdownFunctions = {}
    function DropdownFunctions:GetSelected()
        return selectedOption
    end
    function DropdownFunctions:SetSelected(option)
        if table.find(options, option) then
            selectedOption = option
            DropdownButton.Text = " " .. selectedOption
            pcall(function() callback(selectedOption) end)
        end
    end
    
    return DropdownFunctions
end

print("[K9 UI] Parte 3/4 Carregada")
-- ═══════════════════════════════════════════════════════════════
-- K9 UI LIBRARY - VERSÃO FINAL FUNCIONAL
-- Parte 4/4: Finalização
-- Baseada em MyUILib3 (Funcional)
-- ═══════════════════════════════════════════════════════════════

-- Adicionar no final da Parte 2/4, depois de "return Tabs"

-- Label
function Elements:Label(LabelText)
    LabelText = LabelText or "This is a label"
    
    local Label = Instance.new("Frame")
    Label.Name = "Label"
    Label.Parent = NewTab
    Label.BackgroundColor3 = CurrentTheme.Glass
    Label.Size = UDim2.new(1, 0, 0, 26)
    
    local LabelPadding = Instance.new("UIPadding")
    LabelPadding.Parent = Label
    LabelPadding.PaddingBottom = UDim.new(0, 6)
    LabelPadding.PaddingLeft = UDim.new(0, 6)
    LabelPadding.PaddingRight = UDim.new(0, 6)
    LabelPadding.PaddingTop = UDim.new(0, 6)
    
    local LabelTitle = Instance.new("TextLabel")
    LabelTitle.Name = "Title"
    LabelTitle.Parent = Label
    LabelTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    LabelTitle.BackgroundTransparency = 1
    LabelTitle.Size = UDim2.new(1, 0, 1, 0)
    LabelTitle.FontFace = Config.Font
    LabelTitle.Text = LabelText
    LabelTitle.TextWrapped = true
    LabelTitle.TextColor3 = CurrentTheme.Text
    LabelTitle.TextSize = 14
    LabelTitle.TextXAlignment = Enum.TextXAlignment.Left
    LabelTitle.TextYAlignment = Enum.TextYAlignment.Top
    
    local Icon = Instance.new("ImageLabel")
    Icon.Name = "Icon"
    Icon.Parent = LabelTitle
    Icon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Icon.BackgroundTransparency = 1
    Icon.Position = UDim2.new(0, -20, 0, 0)
    Icon.Size = UDim2.new(0, 14, 0, 14)
    Icon.Image = "rbxassetid://10889394367"
    Icon.ImageColor3 = Color3.fromRGB(127, 127, 127)
    
    local IconPadding = Instance.new("UIPadding")    IconPadding.Parent = LabelTitle
    IconPadding.PaddingLeft = UDim.new(0, 20)
    
    local LabelCorner = Instance.new("UICorner")
    LabelCorner.CornerRadius = UDim.new(0, 4)
    LabelCorner.Parent = Label
    
    local LabelStroke = Instance.new("UIStroke")
    LabelStroke.Name = "UIStroke"
    LabelStroke.Parent = Label
    LabelStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    LabelStroke.Color = CurrentTheme.Border
    LabelStroke.LineJoinMode = Enum.LineJoinMode.Round
    LabelStroke.Thickness = 1
    LabelStroke.Transparency = 0
    
    return {}
end

-- InfoLabel
function Elements:InfoLabel(InfoText)
    InfoText = InfoText or "This is info"
    
    local Info = Instance.new("Frame")
    Info.Name = "Info"
    Info.Parent = NewTab
    Info.BackgroundColor3 = Color3.fromRGB(3, 32, 43)
    Info.Size = UDim2.new(1, 0, 0, 26)
    
    local InfoPadding = Instance.new("UIPadding")
    InfoPadding.Parent = Info
    InfoPadding.PaddingBottom = UDim.new(0, 6)
    InfoPadding.PaddingLeft = UDim.new(0, 6)
    InfoPadding.PaddingRight = UDim.new(0, 6)
    InfoPadding.PaddingTop = UDim.new(0, 6)
    
    local InfoTitle = Instance.new("TextLabel")
    InfoTitle.Name = "Title"
    InfoTitle.Parent = Info
    InfoTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    InfoTitle.BackgroundTransparency = 1
    InfoTitle.Size = UDim2.new(1, 0, 1, 0)
    InfoTitle.FontFace = Config.Font
    InfoTitle.Text = InfoText
    InfoTitle.TextWrapped = true
    InfoTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    InfoTitle.TextSize = 14
    InfoTitle.TextXAlignment = Enum.TextXAlignment.Left
    InfoTitle.TextYAlignment = Enum.TextYAlignment.Top
        local InfoIcon = Instance.new("ImageLabel")
    InfoIcon.Name = "Icon"
    InfoIcon.Parent = InfoTitle
    InfoIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    InfoIcon.BackgroundTransparency = 1
    InfoIcon.Position = UDim2.new(0, -20, 0, 0)
    InfoIcon.Size = UDim2.new(0, 14, 0, 14)
    InfoIcon.Image = "rbxassetid://10889391188"
    InfoIcon.ImageColor3 = Color3.fromRGB(12, 170, 218)
    
    local InfoIconPadding = Instance.new("UIPadding")
    InfoIconPadding.Parent = InfoTitle
    InfoIconPadding.PaddingLeft = UDim.new(0, 20)
    
    local InfoCorner = Instance.new("UICorner")
    InfoCorner.CornerRadius = UDim.new(0, 4)
    InfoCorner.Parent = Info
    
    local InfoStroke = Instance.new("UIStroke")
    InfoStroke.Name = "UIStroke"
    InfoStroke.Parent = Info
    InfoStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    InfoStroke.Color = Color3.fromRGB(11, 136, 177)
    InfoStroke.LineJoinMode = Enum.LineJoinMode.Round
    InfoStroke.Thickness = 1
    InfoStroke.Transparency = 0
    
    return {}
end

return Elements
end
return Tabs
end

-- Version
K9Library.Version = "1.0.0"
K9Library.Author = "K9 Development"

print("[K9 UI] Parte 4/4 Carregada - Library Completa!")
print("[K9 UI] Versão: " .. K9Library.Version)

return K9Library
