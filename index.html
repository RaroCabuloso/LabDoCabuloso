<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Space Mobile - Editor de Códigos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1e1e1e;
            --bg-secondary: #252526;
            --bg-tertiary: #2d2d30;
            --text-primary: #cccccc;
            --text-secondary: #9cdcfe;
            --accent: #007acc;
            --accent-hover: #005a9e;
            --border: #3e3e42;
            --success: #4ec9b0;
            --warning: #dcdcaa;
            --error: #f44747;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f8f8;
            --bg-tertiary: #f0f0f0;
            --text-primary: #333333;
            --text-secondary: #0066cc;
            --accent: #007acc;
            --accent-hover: #005a9e;
            --border: #e0e0e0;
            --success: #22863a;
            --warning: #b08800;
            --error: #d73a49;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header {
            background: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent);
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-danger {
            background: var(--error);
        }

        .btn-danger:hover {
            background: #d32f2f;
        }

        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--bg-tertiary);
            transform: rotate(180deg);
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .editor-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
        }

        .tabs {
            display: flex;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 0.8rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
            background: var(--bg-secondary);
        }

        .tab:hover:not(.active) {
            background: var(--bg-primary);
        }

        .editor-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .editor {
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            color: var(--text-primary);
            border: none;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            outline: none;
            display: none;
        }

        .editor.active {
            display: block;
        }

        .editor::-webkit-scrollbar {
            width: 8px;
        }

        .editor::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        .editor::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        .preview-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-secondary);
        }

        .preview-header {
            background: var(--bg-tertiary);
            padding: 0.8rem 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .preview-iframe {
            flex: 1;
            border: none;
            background: white;
        }

        .status-bar {
            background: var(--bg-tertiary);
            padding: 0.5rem 1rem;
            border-top: 1px solid var(--border);
            font-size: 0.8rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .error-indicator {
            color: var(--error);
            display: none;
        }

        .error-indicator.show {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .editor-panel {
                border-right: none;
                border-bottom: 1px solid var(--border);
            }

            .controls {
                width: 100%;
                justify-content: center;
            }

            .btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }

            .header {
                padding: 0.8rem;
            }

            .tabs {
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .tabs::-webkit-scrollbar {
                display: none;
            }

            .tab {
                min-width: fit-content;
                padding: 0.6rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1rem;
            }

            .controls {
                gap: 0.3rem;
            }

            .btn {
                font-size: 0.7rem;
                padding: 0.3rem 0.6rem;
            }

            .btn span {
                display: none;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 1rem;
            border-radius: 4px;
            box-shadow: 0 4px 12px var(--shadow);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .loading {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--accent);
            font-size: 1.2rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .spinner {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body data-theme="dark">
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-code"></i>
                <span>Code Space Mobile</span>
            </div>
            <div class="controls">
                <button class="btn" onclick="runCode()">
                    <i class="fas fa-play"></i>
                    <span>Executar</span>
                </button>
                <button class="btn btn-secondary" onclick="saveCode()">
                    <i class="fas fa-save"></i>
                    <span>Salvar</span>
                </button>
                <button class="btn btn-secondary" onclick="loadCode()">
                    <i class="fas fa-folder-open"></i>
                    <span>Restaurar</span>
                </button>
                <button class="btn btn-secondary" onclick="exportCode()">
                    <i class="fas fa-download"></i>
                    <span>Exportar</span>
                </button>
                <button class="btn btn-danger" onclick="clearAll()">
                    <i class="fas fa-trash"></i>
                    <span>Limpar</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </header>

        <main class="main-content">
            <div class="editor-panel">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('html')">
                        <i class="fab fa-html5"></i>
                        HTML
                    </button>
                    <button class="tab" onclick="switchTab('css')">
                        <i class="fab fa-css3-alt"></i>
                        CSS
                    </button>
                    <button class="tab" onclick="switchTab('js')">
                        <i class="fab fa-js-square"></i>
                        JavaScript
                    </button>
                </div>
                <div class="editor-container">
                    <textarea class="editor active" id="htmlEditor" placeholder="Digite seu código HTML aqui..."><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Site</title>
</head>
<body>
    <h1>Olá, Code Space Mobile!</h1>
    <p>Comece a editar seu código aqui.</p>
</body>
</html></textarea>
                    <textarea class="editor" id="cssEditor" placeholder="Digite seu código CSS aqui...">body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-align: center;
}

h1 {
    font-size: 2.5em;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

p {
    font-size: 1.2em;
    line-height: 1.6;
}</textarea>
                    <textarea class="editor" id="jsEditor" placeholder="Digite seu código JavaScript aqui...">// Seu código JavaScript aqui
console.log('Code Space Mobile iniciado!');

// Exemplo de interação
document.addEventListener('DOMContentLoaded', function() {
    console.log('Página carregada com sucesso!');
});</textarea>
                    <div class="loading">
                        <i class="fas fa-spinner spinner"></i>
                    </div>
                </div>
            </div>

            <div class="preview-panel">
                <div class="preview-header">
                    <i class="fas fa-eye"></i>
                    Visualização ao Vivo
                </div>
                <iframe class="preview-iframe" id="preview"></iframe>
            </div>
        </main>

        <div class="status-bar">
            <div class="error-indicator" id="errorIndicator">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText">Erro detectado</span>
            </div>
            <div>
                <span id="statusText">Pronto</span>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <script>
        let currentTab = 'html';
        let autoSaveInterval;

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            loadCode();
            runCode();
            startAutoSave();
            setupKeyboardShortcuts();
            
            // Auto-update preview while typing
            ['htmlEditor', 'cssEditor', 'jsEditor'].forEach(id => {
                document.getElementById(id).addEventListener('input', debounce(runCode, 1000));
            });
        });

        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab:nth-child(${getTabIndex(tab)})`).classList.add('active');
            
            // Update editors
            document.querySelectorAll('.editor').forEach(e => e.classList.remove('active'));
            document.getElementById(tab + 'Editor').classList.add('active');
            
            currentTab = tab;
            updateStatus(`Editor ${tab.toUpperCase()} ativo`);
        }

        function getTabIndex(tab) {
            const tabs = { html: 1, css: 2, js: 3 };
            return tabs[tab];
        }

        function runCode() {
            const html = document.getElementById('htmlEditor').value;
            const css = document.getElementById('cssEditor').value;
            const js = document.getElementById('jsEditor').value;
            
            const preview = document.getElementById('preview');
            
            // Check for basic syntax errors
            checkSyntaxErrors(html, css, js);
            
            const fullCode = `
                <!DOCTYPE html>
                <html lang="pt-BR">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Preview</title>
                    <style>${css}</style>
                </head>
                <body>
                    ${html}
                    <script>
                        try {
                            ${js}
                        } catch(e) {
                            console.error('JavaScript Error:', e);
                        }
                    </script>
                </body>
                </html>
            `;
            
            preview.srcdoc = fullCode;
            updateStatus('Código executado');
        }

        function saveCode() {
            const codeData = {
                html: document.getElementById('htmlEditor').value,
                css: document.getElementById('cssEditor').value,
                js: document.getElementById('jsEditor').value,
                timestamp: new Date().toLocaleString()
            };
            
            // Since localStorage is not supported, we'll store in memory
            window.savedCode = codeData;
            showNotification('Código salvo com sucesso!');
            updateStatus('Código salvo');
        }

        function loadCode() {
            if (window.savedCode) {
                document.getElementById('htmlEditor').value = window.savedCode.html;
                document.getElementById('cssEditor').value = window.savedCode.css;
                document.getElementById('jsEditor').value = window.savedCode.js;
                
                runCode();
                showNotification('Código restaurado!');
                updateStatus(`Código restaurado (${window.savedCode.timestamp})`);
            } else {
                showNotification('Nenhum código salvo encontrado!');
            }
        }

        function clearAll() {
            if (confirm('Tem certeza que deseja limpar todo o código?')) {
                document.getElementById('htmlEditor').value = '';
                document.getElementById('cssEditor').value = '';
                document.getElementById('jsEditor').value = '';
                
                runCode();
                showNotification('Código limpo!');
                updateStatus('Editores limpos');
            }
        }

        function exportCode() {
            const html = document.getElementById('htmlEditor').value;
            const css = document.getElementById('cssEditor').value;
            const js = document.getElementById('jsEditor').value;
            
            const fullCode = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Site</title>
    <style>
${css}
    </style>
</head>
<body>
${html}
    <script>
${js}
    </script>
</body>
</html>`;
            
            const blob = new Blob([fullCode], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'meu-site.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Arquivo exportado!');
            updateStatus('Arquivo HTML exportado');
        }

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            
            const themeIcon = document.querySelector('.theme-toggle i');
            themeIcon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            
            // Store theme preference in memory
            window.themePreference = newTheme;
            
            showNotification(`Tema ${newTheme === 'dark' ? 'escuro' : 'claro'} ativado!`);
        }

        function loadTheme() {
            if (window.themePreference) {
                document.body.setAttribute('data-theme', window.themePreference);
                const themeIcon = document.querySelector('.theme-toggle i');
                themeIcon.className = window.themePreference === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function updateStatus(message) {
            document.getElementById('statusText').textContent = message;
        }

        function checkSyntaxErrors(html, css, js) {
            const errorIndicator = document.getElementById('errorIndicator');
            let hasErrors = false;
            
            // Basic HTML validation
            if (html.includes('<') && !html.includes('>')) {
                hasErrors = true;
            }
            
            // Basic CSS validation
            if (css.includes('{') && !css.includes('}')) {
                hasErrors = true;
            }
            
            // Basic JS validation
            if (js.includes('(') && !js.includes(')')) {
                hasErrors = true;
            }
            
            if (hasErrors) {
                errorIndicator.classList.add('show');
                document.getElementById('errorText').textContent = 'Possível erro de sintaxe detectado';
            } else {
                errorIndicator.classList.remove('show');
            }
        }

        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl/Cmd + S: Save
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    saveCode();
                }
                
                // Ctrl/Cmd + Enter: Run code
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    runCode();
                }
                
                // Ctrl/Cmd + 1/2/3: Switch tabs
                if ((e.ctrlKey || e.metaKey) && ['1', '2', '3'].includes(e.key)) {
                    e.preventDefault();
                    const tabs = ['html', 'css', 'js'];
                    switchTab(tabs[parseInt(e.key) - 1]);
                }
            });
        }

        function startAutoSave() {
            autoSaveInterval = setInterval(() => {
                saveCode();
            }, 30000); // Auto-save every 30 seconds
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Initialize syntax highlighting
        document.addEventListener('DOMContentLoaded', function() {
            // Add syntax highlighting classes to textareas
            const editors = document.querySelectorAll('.editor');
            editors.forEach(editor => {
                editor.addEventListener('input', function() {
                    // Basic syntax highlighting would go here
                    // For now, we'll use the built-in browser highlighting
                });
            });
        });
    </script>
</body>
</html>
